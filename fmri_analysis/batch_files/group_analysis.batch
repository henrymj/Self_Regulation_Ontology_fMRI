#!/bin/bash
#SBATCH --job-name=group_analysis_{output}
#SBATCH --output=.out/group_analysis_{output}.out
#SBATCH --error=.err/group_analysis_{output}.err
#SBATCH --time=20:00:00
# SBATCH --mem=120000
#SBATCH --qos=russpold
#SBATCH --mail-type=ALL
#SBATCH --mail-user=ieisenbe@stanford.edu
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=16
#SBATCH -p russpold
module load system
module load singularity
export PYTHONPATH=""
# set up paths
singularity_loc=/oak/stanford/groups/russpold/users/ieisenbe/Self_Regulation_Ontology/fmri_analysis/nipype_image-2017-10-03-da77dd426e45.img
mask_dir=/oak/stanford/groups/russpold/users/ieisenbe/Self_Regulation_Ontology/fmri_analysis
/fmriprep/fmriprep/
data_dir=/oak/stanford/groups/russpold/users/ieisenbe/Self_Regulation_Ontology/fmri_analysis/{output}/1stLevel
# run singularity, scratch is automatically mounted
singularity run $singularity_loc /scratch/PI/russpold/work/ieisenbe/uh2/{output}/2ndLevel \ --script group_analysis.py \
    --data_dir $data_dir \
    --mask_dir $mask_dir